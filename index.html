<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ë…¸ìŠ¤íƒ¤ì§€ì–´ : ì§‘ì„ ì°¾ì•„ì„œ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbit:wght@400&display=swap" rel="stylesheet">

<style>
  *{margin:0; padding:0; box-sizing:border-box;}

  body{
    width:100vw; height:100vh;
    overflow:hidden; position:relative;
    cursor:none;
    font-family:"Orbit",sans-serif;
  }

  /* -----------------------------
      ë¹„ë””ì˜¤ ë°°ê²½
  ----------------------------- */
  #video-background{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    object-fit:cover; z-index:1;
    transition:opacity 1.5s ease-in-out;
  }

  /* -----------------------------
      ìë§‰ ìœ„ì¹˜ ì¡°ì • ì˜ì—­
  ----------------------------- */
  #content-overlay{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    display:flex; flex-direction:column;
    justify-content:flex-end;   /* ì•„ë˜ìª½ ìë§‰ ìŠ¤íƒ€ì¼ */
    align-items:center;
    padding-bottom:200px;       /* ìë§‰ ìœ„ì¹˜ */
    z-index:2;
    pointer-events:none;
  }

  /* -----------------------------
      ë ˆíŠ¸ë¡œ ìë§‰ë°” ìŠ¤íƒ€ì¼
  ----------------------------- */
  #message{
    color:#fff;
    font-size:1.7rem;
    line-height:1.6;
    text-align:center;

    background:rgba(0,0,0,0.55);
    border:1.5px solid rgba(255,255,255,0.4);
    border-radius:10px;

    padding:18px 26px;
    max-width:700px;

    opacity:0;
    transition:opacity .5s ease-in-out;

    backdrop-filter:blur(3px);
    text-shadow:0 0 3px rgba(0,0,0,0.6);

    position:relative;
  }

  /* CRT ìŠ¤ìº”ë¼ì¸ íš¨ê³¼ */
  #message::after{
    content:"";
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
    background:repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 1px,
      transparent 2px
    );
    mix-blend-mode:soft-light;
  }

  /* -----------------------------
      ì´ˆë°˜ íƒ€ì´í‹€ (í° ê¸€ì”¨)
  ----------------------------- */
  #title{
    color:white;
    font-size:3.8rem;
    margin-bottom:40px;
    opacity:0;
    transition:opacity 1s ease-in-out;
    text-shadow:1px 1px 10px rgba(0,0,0,0.3);
    letter-spacing:0.1em;
  }

  #instruction{
    position:fixed; bottom:30px; left:50%;
    transform:translateX(-50%);
    font-size:.9rem; color:white;
    z-index:3; pointer-events:none;
    transition:opacity .5s ease-in-out;
  }

  #vignette{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    background:radial-gradient(ellipse at center,transparent 0%,rgba(0,0,0,.4) 100%);
    z-index:3; pointer-events:none;
  }

  /* ì»¤ì„œ ë”°ë¼ì˜¤ëŠ” ì§‘ ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ */
  #home-container{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:1000; /* ëª¨ë“  í™”ë©´ ìœ„ì— í‘œì‹œ */
  }

  /* ì»¤ì„œ ë”°ë¼ì˜¤ëŠ” ì§‘ ì´ë¯¸ì§€ */
  .home{
    position:absolute;
    width:100px;
    pointer-events:none;
    mix-blend-mode:screen;
    opacity:0.8;
    transition:transform 0.1s ease-out, opacity 0.5s ease-out;
    will-change:transform;
    z-index:1000;
  }

  /* -----------------------------
      ìµœì¢… ë¸”ë™ + title.png ë“±ì¥
  ----------------------------- */
  #black-fade{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    background:black;
    opacity:0;
    z-index:5;
    pointer-events:none;
    transition:opacity 1.5s ease-in-out;
  }

  #final-title{
    position:fixed;
    top:50%; left:50%;
    transform:translate(-50%,-50%) scale(1.2);
    opacity:0;
    width:700px; max-width:90%;
    z-index:6;
    transition:opacity 1.8s ease-out, transform 1.8s ease-out;
  }
  #final-title.show{
    opacity:1;
    transform:translate(-50%,-50%) scale(1);
  }

  /* -----------------------------
      inhouse.png í™”ë©´
  ----------------------------- */
  #inhouse-screen{
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    z-index:7;
    opacity:0;
    pointer-events:none;
    transition:opacity 1.5s ease-in-out;
  }
  #inhouse-screen.show{
    opacity:1;
    pointer-events:auto;
  }
  #inhouse-screen img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

/* --------------------------
   ? ë²„íŠ¼ ìŠ¤íƒ€ì¼
--------------------------- */
#help-button {
  position:fixed;
  top:30px;
  right:30px;
  width:38px;
  height:38px;

  border:1.5px solid rgba(255,255,255,0.6);
  border-radius:8px;
  background:rgba(0,0,0,0.45);
  backdrop-filter:blur(4px);

  display:flex;
  justify-content:center;
  align-items:center;

  color:white;
  font-size:1.4rem;
  font-weight:600;
  cursor:pointer;
  opacity:0;
  z-index:10;

  transition:opacity .8s ease, background .3s ease;
}

/* í˜¸ë²„ ì‹œ */
#help-button:hover {
  background:rgba(255,255,255,0.12);
}


/* --------------------------
     íŒì—… ìŠ¤íƒ€ì¼
--------------------------- */
#help-popup {
  position:fixed;
  top:30px;
  right:80px; /* ë²„íŠ¼ ì˜†ì— ìœ„ì¹˜ */
  opacity:0;
  pointer-events:none;
  transform:translateY(-10px);
  transition:opacity .4s ease, transform .4s ease;
  z-index:9;
}

#help-popup .popup-inner {
  background:rgba(0,0,0,0.7);
  padding:18px 24px;
  border-radius:10px;
  width:260px;

  border:1px solid rgba(255,255,255,0.5);
  backdrop-filter:blur(5px);

  color:white;
  font-size:.9rem;
  line-height:1.5;
  box-shadow:0 0 20px rgba(0,0,0,0.3);
}

#help-popup h3 {
  margin-bottom:8px;
  font-size:1.05rem;
  color:rgb(255,255,255);
  letter-spacing:0.03em;
}

/* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ íŒì—… í™œì„±í™” */
#help-button:hover + #help-popup {
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

</style>
</head>
<body>

  <video id="video-background" autoplay muted loop>
    <source src="intro1.mp4" type="video/mp4">
  </video>

  <div id="content-overlay">
    <div id="message"></div>
    <div id="title">ë…¸ìŠ¤íƒ¤ì§€ì–´ : ì§‘ì„ ì°¾ì•„ì„œ</div>
  </div>

  <div id="instruction">í´ë¦­í•´ì„œ í™”ë©´ì„ ë„˜ê¸°ì„¸ìš”.</div>
  <div id="vignette"></div>

  <div id="home-container"></div>

  <div id="black-fade"></div>
  <img id="final-title" src="title.png">
  
  <!-- inhouse.png í™”ë©´ -->
  <div id="inhouse-screen">
    <img src="inhouse.png" alt="inhouse">
  </div>
  
  <!-- ? ë„ì›€ë§ ë²„íŠ¼ -->
<div id="help-button">?</div>

<!-- ë„ì›€ë§ íŒì—… -->
<div id="help-popup">
  <div class="popup-inner">
    <h3>ì‚¬ìš© ë°©ë²•</h3>
    <p>í™”ë©´ì„ í´ë¦­í•´ì„œ<br>ë‹¤ìŒ ì¥ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>
       ì£¼ì¸ê³µì„ ë”°ë¼<br>ì§‘ìœ¼ë¡œ ëŒì•„ê°€ì„¸ìš”!</p>
  </div>
</div>


<script>
/* --------------------------------
    ë©”ì‹œì§€ + ë¹„ë””ì˜¤ íƒ€ì´í•‘ ë¡œì§
--------------------------------- */
const messages=[
  "ë„ˆë¬´ ì™¸ë¡œì›Œ...",
  "ë‚˜ë§Œ ê²‰ë„ëŠ” ê²ƒ ê°™ì•„...",
  "ëª¨ë“  ê²Œ ë‹¤ ë‚¯ì„¤ì–´...",
  "ì›ë˜ ë‚´ê°€ ìˆë˜ ê³³ìœ¼ë¡œ ëŒì•„ê°€ê³  ì‹¶ì–´!"
];

let currentMessageIndex=0;
let isTransitioning=false;
let typingTimeout=null;

const messageEl=document.getElementById('message');
const titleEl=document.getElementById('title');
const videoEl=document.getElementById('video-background');
const instructionEl=document.getElementById('instruction');
const blackFade=document.getElementById('black-fade');
const finalTitle=document.getElementById('final-title');
const inhouseScreen=document.getElementById('inhouse-screen');

/* ë¹„ë””ì˜¤ ë°”ê¾¸ê¸° */
function changeVideo(src){
  videoEl.src=src;
  videoEl.load();
  videoEl.play();
}

/* íƒ€ì´í•‘ íš¨ê³¼ */
function typeText(el,text,cb){
  let i=0;
  el.textContent="";
  el.classList.add('show');

  function type(){
    if(i<text.length){
      el.textContent+=text.charAt(i++);
      typingTimeout=setTimeout(type,80);
    } else if(cb){
      cb();
    }
  }
  type();
}

/* ë©”ì‹œì§€ ì¶œë ¥ */
function showMessage(i){
  if(i>=messages.length){
    setTimeout(()=>titleEl.style.opacity=1,500);
    return;
  }

  isTransitioning=true;
  if(typingTimeout)clearTimeout(typingTimeout);

  messageEl.style.opacity=0;
  messageEl.textContent='';

  if(i===0)changeVideo('intro1.mp4');
  else if(i===1)changeVideo('intro2.mp4');
  else if(i===2 || i===3)changeVideo('intro3.mp4');

  setTimeout(()=>{
    messageEl.style.opacity=1;
    typeText(messageEl,messages[i],()=>isTransitioning=false);
  },500);
}

/* -------------------------------
   ë§ˆì§€ë§‰ í´ë¦­ â†’ ë¸”ë™ + íƒ€ì´í‹€ ë“±ì¥
-------------------------------- */
let isTitleScreenShown=false;

function triggerFinalScene(){
  instructionEl.style.opacity=0;
  messageEl.style.opacity=0;
  titleEl.style.opacity=0;

  videoEl.style.opacity=0;
  blackFade.style.opacity=1;

  setTimeout(()=>{
    finalTitle.classList.add('show');
    isTitleScreenShown=true;
  },1500);

  /* ğŸ”¥ íƒ€ì´í‹€ ë“±ì¥ í›„ ? ë²„íŠ¼ í‘œì‹œ */
  setTimeout(()=>{
    document.getElementById('help-button').style.opacity = 1;
  },2000);
}

/* íƒ€ì´í‹€ í™”ë©´ì—ì„œ í´ë¦­ ì‹œ inhouse.pngë¡œ ì´ë™ */
function showInhouseScreen(){
  finalTitle.style.opacity=0;
  blackFade.style.opacity=0;
  setTimeout(()=>{
    inhouseScreen.classList.add('show');
  },500);
}


/* í´ë¦­ ì´ë²¤íŠ¸ */
document.body.addEventListener('click',(e)=>{
  /* ë„ì›€ë§ ë²„íŠ¼ í´ë¦­ì€ ë¬´ì‹œ */
  if(e.target.closest('#help-button') || e.target.closest('#help-popup')){
    return;
  }

  /* íƒ€ì´í‹€ í™”ë©´ì´ í‘œì‹œëœ ìƒíƒœì—ì„œ í´ë¦­í•˜ë©´ inhouse.pngë¡œ ì´ë™ */
  if(isTitleScreenShown){
    showInhouseScreen();
    isTitleScreenShown=false;
    return;
  }

  if(isTransitioning)return;

  if(currentMessageIndex===messages.length){
    triggerFinalScene();
    currentMessageIndex++;
    return;
  }

  if(currentMessageIndex<messages.length){
    showMessage(currentMessageIndex++);
  }
});

/* ì²« ë¡œë”© */
window.addEventListener('load',()=>{
  setTimeout(()=>{
    showMessage(0);
    currentMessageIndex=1;
  },500);
});

/* --------------------------------
    ì»¤ì„œ ë”°ë¼ì˜¤ëŠ” ì§‘ ì´ë¯¸ì§€ íš¨ê³¼
--------------------------------- */
const homeContainer=document.getElementById("home-container");
const homeImgs=['home2.png','home.png'];
let lastCreateTime=0;

function createHomeImage(x,y){
  const img=document.createElement('img');
  img.src=homeImgs[Math.floor(Math.random()*homeImgs.length)];
  img.className='home';
  img.style.left=x+'px';
  img.style.top=y+'px';

  if(Math.random()>0.5){
    img.style.width='80px';
    img.style.opacity='0.6';
    img.style.filter='blur(1.5px)';
  }

  homeContainer.appendChild(img);

  setTimeout(()=>{
    img.style.opacity=0;
    setTimeout(()=>img.remove(),500);
  },800);
}

document.addEventListener("mousemove",(e)=>{
  const now=Date.now();
  if(now-lastCreateTime>50){
    createHomeImage(e.clientX,e.clientY);
    lastCreateTime=now;
  }
});
</script>
</body>
</html>
